---
title: Electronics: Input
---

# Introduction

The goal of this project is to build an electronic board that can receive signals from a plant via electrodes placed on its leaves and send instructions to another board dedicated to the outputs (12 V). The calculations are performed by the microchip. The data can be read on a computer via USB.

## Research

I have previously researched and created a prototype of what could be an easy setup to (try) listen to the electrical activity of plants. I did this using an Arduino Uno and a 555 IC timer on a breadboard. You can read more on the page dedicated to this topic.

[Research / Sensing the electrical activity of a plant](button:final-project-research-input-plant-activity.html)

I don't know how relevant the data I collect is though, but I feel that detecting any kind of electrical activity from a plant is good for my project.

Don't forget that the main idea of my project is to invite humans to observe nature and to get closer to it. I am not looking for scientific accuracy at all costs, although I would ideally like to achieve it.

![First prototype](prototype.jpg)

# Key electronics components

## ATMega 16-U2

After some discussions with my instructors at Fab Lab Barcelona, I decided to test the (poorly documented) `ATMega 16-U2` chip. It is available in the lab inventory, it speaks USB, has the minimum requirements for my project (and this is the microchip used in the Arduino Uno to exchange data via USB). I always prefer to use appropriate hardware, and especially in this context of custom electronics.

I thought it was a good idea to design my electronics around this chip (but it wasn't). I will talk later about the problems I encountered with the ATMEGA 16-U2, and why using it might be a bad idea.

## Resonator 24 MHz

An additional cystal/resonator must be coupled to the ATMega 16-U2 for it to work with USB.
According to Andrew Mao's [documentation](http://fab.cba.mit.edu/classes/863.14/people/andrew_mao/week11/):

> In order to use Full-speed (12 Mbit/s) USB, the microcontroller needs to be able to generate a precize 48 MHz clock with a deviation of no more than 0.25%. Since resonators have 0.5% tolerance, This means only quartz crystals can be used, and moreover they need to evenly divide into this frequency in order for a phase-locked loop to generate this clock. For the ATMega16U2, this will require a 8MHz or 16MHz crystal - no substitutes.

Oscar Gonzalez, one of my instructors, recommended that I use a resonator rather than a crystal because it is easier to design and solder, since it is only one piece, than a crystal. A resonator offers an extra precision that I don't need in my project.

Any crystal/resonator that operates at a frequency that is a multiple of 12 should work. It could be a `12 MHz`, `24 MHZ` or `48 MHz`. I opted for the `resonator 24 MHz` because it is available in the lab's inventory.

## Mini USB

I opted for a mini USB port rather than a micro USB, even if the latter is more used nowadays. The micro USB is so small that it is difficult to solder, but also very fragile. Therefore it is not recommended to use it for prototypes. However, I think it would be better to use it for a final product, simply because people are more likely to already have a cable compatible with it.

## 555 IC Timer

This component works as a square wave generator and the values it gives can be modified by changing the resistance of the circuit. If the plant has a variation in its electrical activity, its resistance changes and so the square wave generated by the timer.

Update: Neil Gershenfeld, during my final presentation, told me that this component is now obsolete and that every new microchip has its function integrated. To be honest, I'm not sure what to make of his remark, I have to investigate a little more.

# Design

I design electronics boards with [KiCad](https://kicad-pcb.org/), a cross platform and open source electronics design automation suite.

![](design-01.png)
![](design-02.png)
![](design-03.png)
![](design-04.png)
![](design-05.png)
![](design-06.png)
![](design-07.png)

# Fabrication

## Milling

## Soldering

## Testing

# Result

# ATMega 16-U2

# Programmation

# Conclusion

# Files

![](input-01.jpg)
![](input-02.jpg)
![](input-03.jpg)
![](input-04.jpg)
![](input-05.jpg)
![](input-06.jpg)